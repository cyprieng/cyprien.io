---
import Pagination from "@components/Pagination.astro";
import PostLink from "@components/PostLink.astro";
import config from "@config";
import MainLayout from "@layouts/MainLayout.astro";
import {
  getTitleForContentType,
  type AnyCollectionEntry,
  type ContentType,
} from "@utils/contentConfig";

export interface Props {
  currentPage: number;
  totalPages: number;
  paginatedPosts: AnyCollectionEntry[];
  contentType: ContentType;
}

const { currentPage, totalPages, paginatedPosts, contentType } = Astro.props;
const title = getTitleForContentType(contentType);
---

<MainLayout title={`${title} | ${config.title}`}>
  <ul>
    {
      paginatedPosts.map(({ data, slug }) => (
        <PostLink href={`/${contentType}/${slug}/`} frontmatter={data} />
      ))
    }
  </ul>

  <Pagination
    {currentPage}
    {totalPages}
    prevUrl={`/${contentType}${currentPage - 1 !== 1 ? "/" + (currentPage - 1) : ""}/`}
    nextUrl={`/${contentType}/${currentPage + 1}/`}
  />
</MainLayout>
