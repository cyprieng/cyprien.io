---
import Pagination from "@components/Pagination.astro";
import PostLink from "@components/PostLink.astro";
import config from "@config";
import type { CollectionEntry } from "astro:content";
import MainLayout from "@layouts/MainLayout.astro";

export interface Props {
  currentPage: number;
  totalPages: number;
  paginatedPosts: CollectionEntry<"blog">[] | CollectionEntry<"projects">[];
}

const { currentPage, totalPages, paginatedPosts } = Astro.props;
---

<MainLayout title={`Posts | ${config.title}`}>
  <ul>
    {
      paginatedPosts.map(({ data, slug }) => (
        <PostLink href={`/posts/${slug}/`} frontmatter={data} />
      ))
    }
  </ul>

  <Pagination
    {currentPage}
    {totalPages}
    prevUrl={`/posts${currentPage - 1 !== 1 ? "/" + (currentPage - 1) : ""}/`}
    nextUrl={`/posts/${currentPage + 1}/`}
  />
</MainLayout>
