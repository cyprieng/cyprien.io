---
/**
 * Homepage displaying last posts
 */

import Hr from "@components/Hr.astro";
import Terminal from "@components/Terminal.astro";
import getSortedPosts from "@utils/getSortedPosts";
import { getCollection } from "astro:content";
import MainLayout from "@layouts/MainLayout.astro";
import PostLink from "@components/PostLink.astro";

const posts = getSortedPosts(await getCollection("blog"));
---

<MainLayout activeNav="home">
  <section id="hero" class="mb-6">
    <Terminal command="neofetch">
      <span style="color: #8caaee;">cyprien</span>@<span style="color: #a6d189;"
        >guillemot</span
      >
      <br />
      -----------------
      <br />
      <span style="color: #8caaee;">OS:</span> Human
      <br />
      <span style="color: #8caaee;">Host:</span> Montpellier, France 🇫🇷
      <br />
      <span style="color: #8caaee;">Kernel:</span> Senior Software Engineer
      <br />
      <span style="color: #8caaee;">Packages:</span> TypeScript, Python, Go
      <br />
      <span style="color: #8caaee;">Hobbies:</span> Running 🏃‍♂️ Triathlon 🏊🚴🏃‍♂️ Hiking
      🥾
      <br />
      <span style="color: #8caaee;">Music:</span> Metal 🤘
      <br />
      <br />
      This is where I write about tech, share projects, and document my learnings.
    </Terminal>
  </section>

  <Hr />

  {
    posts.length > 0 && (
      <section id="recent-posts" class="my-10">
        <ul>
          {posts.map(
            ({ data, slug }, index) =>
              index < 10 && (
                <PostLink href={`/posts/${slug}/`} frontmatter={data} />
              ),
          )}
        </ul>
      </section>
    )
  }
</MainLayout>
